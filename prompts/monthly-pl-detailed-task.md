# Monthly PL Page - Pixel Perfect Implementation Task

## 目的
Projection AIの月次予実管理ページの完全な再現

## 参照URL
https://app.projection-ai.com/21d968b4bbe6490b8fd5f4088f42308f/monthly-pl

## 技術スタック
- Next.js 15 (App Router)
- Tailwind CSS v4
- shadcn/ui
- Recharts
- react-datasheet-grid

## 作成するファイル

### 1. `src/app/monthly-pl/page.tsx`
メインページコンポーネント

### 2. `src/components/monthly-pl-chart.tsx`
予実推移チャート

### 3. `src/components/monthly-pl-table.tsx`
月次データテーブル

---

## 詳細な視覚仕様

### ページレイアウト構造

```
┌─────────────────────────────────────────────────────────────┐
│ [Sidebar]  │  [Header: CFO > モニタリング > 月次予実管理]     │
│            │──────────────────────────────────────────────────│
│            │  [Profile]  [通常ケース]        [円▼] [< 2022/4-2023/3 >] │
│            │  ┌────────┐                                      │
│            │  │ 画像   │  ┌─────────────────────────────────┐ │
│            │  │Sakamoto│  │ 予実推移        MRR▼  ◯計画 ●実績│ │
│            │  │ CFO    │  │ [Line Chart]                    │ │
│            │  └────────┘  └─────────────────────────────────┘ │
│            │                                                  │
│            │  ┌─────────────────────────────────────────────┐ │
│            │  │ 月次データ ⓘ          [予実][達成率][差分][設定]│ │
│            │  │ [Table with monthly data]                   │ │
│            │  └─────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### プロファイルカード仕様
- 名前: "Sakamoto"
- バッジ: "CFO" (グレー背景、小さいテキスト)
- 画像サイズ: 約150x180px
- 画像: `/public/profile-sakamoto.jpg` (プレースホルダー使用可)
- アイコンボタン: 設定、拡大

### チャート仕様 (予実推移)

#### データ構造
```typescript
const chartData = [
  { month: "4月", plan: 2000000, actual: 1800000 },
  { month: "5月", plan: 2500000, actual: 2200000 },
  { month: "6月", plan: 3000000, actual: null },  // 実績なし
  { month: "7月", plan: 3500000, actual: null },
  { month: "8月", plan: 4500000, actual: null },
  { month: "9月", plan: 5500000, actual: null },
  { month: "10月", plan: 7000000, actual: null },
  { month: "11月", plan: 8500000, actual: null },
  { month: "12月", plan: 10000000, actual: null },
  { month: "1月", plan: 11500000, actual: null },
  { month: "2月", plan: 13000000, actual: null },
  { month: "3月", plan: 14500000, actual: null },
]
```

#### スタイル
- 計画線: 青色 `#3b82f6`、点線 (strokeDasharray="4 4")
- 実績線: 緑色 `#22c55e`、実線
- Y軸: 0〜18,000,000 (円表記)
- X軸: 4月〜3月
- グリッド: 水平線のみ、薄いグレー

### テーブル仕様 (月次データ)

#### ヘッダー構造 (2段)
```
| (空白)     | 2022/4 | 2022/5 | ... | 2023/3 |
|            |  計画  |  計画  | ... |  計画  |
```

#### セクション構造
```
KPI - ファネル (セクションヘッダー、背景グレー)
├── セッション数    21件   0件   21件 ...  (値は青色 #3b82f6)
├── リード数        11件   0件   11件 ...  (値は青色)
│   └── リード率    52.4%  0%   52.4% ... (サブ行、インデント、グレーテキスト)
├── 商談数          4件    0件   4件  ...  (値は青色)
│   └── 商談率      36.4%  0%   36.4% ... (サブ行)
├── 新規受注        1件    0件   1件  ...  (値は青色)
│   └── 受注率      25%    0%   25%  ...  (サブ行)

KPI - 顧客 (セクションヘッダー)
├── 解約顧客        0件    0件   0件  ...  (値は青色)
│   └── 解約率      0%     0%    0%   ...  (サブ行)
├── 顧客数（累計）  1件    1件   2件  ...

KPI - ユニットエコノミクス (セクションヘッダー)
├── ARPA           ¥1,000,000 ...
├── LTV            ¥0 ...
```

#### テーブルスタイル
- セクションヘッダー: 背景 `bg-muted/50`、フォント太字
- 数値（件数）: 青色 `text-blue-600`
- サブ行（率）: インデント、`text-muted-foreground`
- セル高さ: 36px
- ヘッダー高さ: 50px (2段構成のため)

### 右上コントロール
- 通貨選択: "円" (Select)
- 期間ナビ: "< 2022/4 - 2023/3 (1期目) >" (左右矢印付き)

### タブコントロール
- 上部: "通常ケース" (アクティブ)
- テーブル上: "予実" | "達成率" | "差分" | "設定"

---

## 既存コードの参照

### デザイントークン確認
```bash
cat src/app/globals.css
```

### 既存コンポーネントパターン
```bash
cat src/components/pl-chart.tsx
cat src/components/pl-table.tsx
cat src/app/page.tsx
```

---

## 実装手順

1. **既存コードを読んでパターンを理解**
   - globals.css のカラー変数
   - pl-chart.tsx のRecharts使用方法
   - pl-table.tsx のreact-datasheet-grid使用方法

2. **チャートコンポーネント作成**
   - `src/components/monthly-pl-chart.tsx`
   - 2本のLine (計画=点線青、実績=実線緑)
   - Y軸ラベル "円"

3. **テーブルコンポーネント作成**
   - `src/components/monthly-pl-table.tsx`
   - 2段ヘッダー対応
   - セクション行のスタイリング
   - 値の色分け（青色）

4. **ページコンポーネント作成**
   - `src/app/monthly-pl/page.tsx`
   - レイアウト組み立て
   - コントロール配置

---

## 成功基準

- [ ] プロファイルカードが左側に表示
- [ ] チャートが計画(点線青)と実績(実線緑)を表示
- [ ] テーブルヘッダーが2段構成（月/計画）
- [ ] セクションヘッダーが背景グレーで表示
- [ ] 数値が青色で表示
- [ ] サブ行（率）がインデントされグレー表示
- [ ] 期間ナビゲーションが機能
